#!/bin/bash

# Source common functions
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
source "$SCRIPT_DIR/scripts/common.sh"

# Display ASCII art
cat << 'EOF'
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@%*%@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@%*++#@%%%%@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@#++++**#@@%%%##%@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@#++++++**##@@@%%%%###%@@@@@@@@@@@@@@
@@@@@@@@@@%*+++++++****##%%%%%%#######%%@@@@@@@@@@
@@@@@@@@@@#*-:......................:::+@@@@@@@@@@
@@@@@@@@@@####*=::..............:::::-+%@@@@@@@@@@
@@@@@@@@@@#######*+::........:::::::-+%%@@@@@@@@@@
@@@@@@@@@@###########+::::::::::::::*%%%@@@@@@@@@@
@@@@@@@@@@############%#+:::::::::-#%%%%@@@@@@@@@@
@@@@@@@@@@####%%#######**-:::::::-#%%%%%@@@@@@@@@@
@@@@@@@@@@####%%###******-::::::-#@@%%%%@@@@@@@@@@
@@@@@@@@@@######*********-:::---+*#%@@%%@@@@@@@@@@
@@@@@@@@@@##**********+++------==++++*%%@@@@@@@@@@
@@@@@@@@@@#+=++++++++++++-----==------=*@@@@@@@@@@
@@@@@@@@@@@@@%+=====++++=----------=#@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@+=======-------=%@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@%*====----+%@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@#+-*%@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@   ____                          @@@@@@@@@
@@@@@@@@  / ___|   _ _ __ ___  ___  _ __ @@@@@@@@@
@@@@@@@@ | |  | | | | '__/ __|/ _ \| '__|@@@@@@@@@
@@@@@@@@ | |__| |_| | |  \__ \ (_) | |   @@@@@@@@@
@@@@@@@@  \____\__,_|_|  |___/\___/|_|   @@@@@@@@@
@@@@@@@@                                 @@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
EOF

log "No need to be frustrated anymore, cursor-installer is here to help!"
echo

log "Beginning installation process. Press Ctrl+C to cancel at any time."
echo

# Check OS compatibility
check_os_compatibility

# Install system dependencies
install_system_dependencies

# Install cursor-installer
install_cursor_installer

# Install Cursor
log "Starting Cursor installation..."
"$INSTALLER_BIN_DIR/cursor-installer"